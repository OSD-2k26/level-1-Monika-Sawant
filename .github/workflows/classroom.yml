name: Level 1 Autograding

on: [push]

jobs:
  grade:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 0   # Fetch full commit history

      - name: Validate Level 1
        run: |
          set -e

          echo "üîç Checking hello.txt..."
          if [ ! -f hello.txt ]; then
            echo "‚ùå hello.txt not found"
            exit 1
          fi

          echo "üîç Checking commit history for message 'begin' (case-insensitive)..."
          if ! git log --pretty=%B \
              | tr '[:upper:]' '[:lower:]' \
              | grep -Fxq "begin"; then
            echo "‚ùå No commit with message 'begin' found (case-insensitive)"
            exit 1
          fi

          echo "‚úÖ LEVEL 1 PASSED"
